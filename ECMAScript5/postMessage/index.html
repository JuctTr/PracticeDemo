<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <title>我是父域</title>
        <style></style>
    </head>
    <body>
        <iframe
            id="childframe"
            name="childframe"
            src="http://localhost:5500/ECMAScript5/postMessage/iframeChild.html"
            frameborder="1"
            width="600"
            height="600"
        ></iframe>

        <textarea id="message"></textarea>

        <input type="button" value="发送" onclick="sendPost()" />

        <script>
            // 并取得返回的数据
            function sendPost() {
                // 获取id为otherPage的iframe窗口对象
                var iframeWin = document.getElementById('childframe').contentWindow;
                // 向该子窗口发送消息
                iframeWin.postMessage(document.getElementById('message').value, 'http://localhost:5500');
            }
            // 监听跨域请求的返回
            window.addEventListener(
                'message',
                function (event) {
                    console.log(event, event.data);
                    console.log(response);
                },
                false
            );
        </script>
    </body>
</html>
